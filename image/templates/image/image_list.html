{% extends "base.html" %}

{% block title %}{% endblock %}

{% block content %}
  {% include 'image/_cards.html' %}
{% endblock %}

{% block scripts %}
{% load static %}
{{ block.super }}
	<script>
    $('.card-body a').click(function(e) {
      e.preventDefault()
      $(this).parent().find('.card-text').eq(0).hide()
      $(this).parent().find('.card-text').eq(1).show()
      $(this).hide()
    })

    $('.user-like').click(function(e) {
      e.preventDefault()
      item = $(this)
      id = item.attr('data-id')
      data = {'id': id, 'csrfmiddlewaretoken': '{{ csrf_token }}'}
      jQuery.post(
        '{% url "image:image_like" %}',
        data,
        function(res) {
          item.text(res['like_count'] + ' 個喜歡 ')
          if(res['is_like']) {
            item.append('<img class="like-icon" src="{% static "img/like.png" %}">')
          }
          else {
            item.append('<img class="like-icon" src="{% static "img/unlike.png" %}">')
          }
        }
      )
    })
	</script>
{% endblock %}